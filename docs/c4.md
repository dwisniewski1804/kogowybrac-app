# C4 Architecture – kogowybrac.app

## L1 – System Context

Users use a mobile application.
The application connects to Public API.
API reads data from the warehouse layer (exposures).
Data comes from public sources (PKW, Sejm, fact-check).

---

## L2 – Container Diagram

The system consists of:

- Public API
- Data Ingestion
- Warehouse (SQL + dbt)
- PostgreSQL
- Object Storage (RAW snapshots)

Data flow:

Sources → Ingestion → RAW + SQL staging → SQL intermediate → Exposures → API → Mobile

---

## L3 – API Components

- HTTP Adapter
- Auth Middleware
- District Scope Policy
- Use Cases
- Repository (reads exposures)
- DTO mapping
- Provenance Resolver

---

## L4 – Code Structure

API layers:

- adapters/
- application/
- domain/
- repos/
- dtos/
- infra/

Warehouse:

- staging/
- intermediate/
- mart/
- exposures/

Ingestion:

- fetch/
- extract/
- provenance/
