# C4 Architecture – kogowybrac.app

## L1 – System Context

Użytkownik korzysta z aplikacji mobilnej.
Aplikacja łączy się z Public API.
API czyta dane z warstwy warehouse (exposures).
Dane pochodzą z publicznych źródeł (PKW, Sejm, fact-check).

---

## L2 – Container Diagram

System składa się z:

- Public API
- Data Ingestion
- Transform (Parquet)
- Warehouse (SQL)
- Search Index
- PostgreSQL
- Object Storage

Przepływ danych:

Źródła → Ingestion → JSON → Parquet → SQL → Exposures → API → Mobile

---

## L3 – API Components

- HTTP Adapter
- Auth Middleware
- District Scope Policy
- Use Cases
- Repository (czyta exposures)
- DTO mapping
- Provenance Resolver

---

## L4 – Code Structure

Warstwy w API:

- adapters/
- application/
- domain/
- repos/
- dtos/
- infra/

Warehouse:

- staging/
- intermediate/
- mart/
- exposures/

Ingestion:

- fetch/
- extract/
- provenance/
